<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <script> if (localStorage.getItem('theme') === 'dark') document.documentElement.classList.add('dark-mode'); </script> <script type="text/javascript" src="/assets/js/theme-switch.js" defer></script> <link rel="stylesheet" href="/assets/css/just-the-docs-switchable.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Creating the Backend | Web Development Documentation</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Creating the Backend" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Web Development Starter Kit for the 2025 Triton Hackathon hosted by CS Foreach @ UCSD." /> <meta property="og:description" content="Web Development Starter Kit for the 2025 Triton Hackathon hosted by CS Foreach @ UCSD." /> <link rel="canonical" href="http://localhost:4000/Example/Backend" /> <meta property="og:url" content="http://localhost:4000/Example/Backend" /> <meta property="og:site_name" content="Web Development Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Creating the Backend" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Web Development Starter Kit for the 2025 Triton Hackathon hosted by CS Foreach @ UCSD.","headline":"Creating the Backend","url":"http://localhost:4000/Example/Backend"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"><img src="https://avatars.githubusercontent.com/u/80286044?s=200&v=4" width="48"><pre> </pre>Web Development</a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Web Development Concepts category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Web%20Development%20Concepts" class="nav-list-link">Web Development Concepts</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Design category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Web%20Development%20Concepts/Design" class="nav-list-link">Design</a><ul class="nav-list"><li class="nav-list-item"> <a href="/Web%20Development%20Concepts/Design/User%20Interaction" class="nav-list-link">User Interaction</a> </li><li class="nav-list-item"> <a href="/Web%20Development%20Concepts/Design/User%20Experience" class="nav-list-link">User Experience</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Frontend category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Web%20Development%20Concepts/Frontend" class="nav-list-link">Frontend</a><ul class="nav-list"><li class="nav-list-item"> <a href="/Web%20Development%20Concepts/Frontend/HTML" class="nav-list-link">Hypertext Markup Language</a> </li><li class="nav-list-item"> <a href="/Web%20Development%20Concepts/Frontend/CSS" class="nav-list-link">Cascading Style Sheets</a> </li><li class="nav-list-item"> <a href="/Web%20Development%20Concepts/Frontend/Javascript" class="nav-list-link">Javascript</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Backend category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Web%20Development%20Concepts/Backend" class="nav-list-link">Backend</a><ul class="nav-list"><li class="nav-list-item"> <a href="/Web%20Development%20Concepts/Backend/Servers" class="nav-list-link">Servers</a> </li><li class="nav-list-item"> <a href="/Web%20Development%20Concepts/Backend/Databases" class="nav-list-link">Databases</a> </li><li class="nav-list-item"> <a href="/Web%20Development%20Concepts/Backend/RESTful" class="nav-list-link">RESTful Routes</a> </li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tutorials category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Tutorials" class="nav-list-link">Tutorials</a><ul class="nav-list"><li class="nav-list-item"><a href="/Tutorials/Getting%20Started" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><a href="/Tutorials/Figma" class="nav-list-link">Figma</a></li><li class="nav-list-item"><a href="/Tutorials/HTML_CSS_JS" class="nav-list-link">HTML, CSS, and Javascript</a></li><li class="nav-list-item"><a href="/Tutorials/Python" class="nav-list-link">Python</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in An Example category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Example" class="nav-list-link">An Example</a><ul class="nav-list"><li class="nav-list-item"><a href="/Example/Design%20Process" class="nav-list-link">Design Process</a></li><li class="nav-list-item"><a href="/Example/Frontend" class="nav-list-link">Creating the Frontend</a></li><li class="nav-list-item"><a href="/Example/Backend" class="nav-list-link">Creating the Backend</a></li></ul></li><li class="nav-list-item"><a href="/team" class="nav-list-link">The Team</a></li></ul> </nav> <footer class="site-footer"> TritonHacks Web Development 2024 Starter Kit, ® CS Foreach </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Web Development Documentation" aria-label="Search Web Development Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-sun" viewBox="0 0 24 24"> <title>Light mode</title> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun"> <circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3"></line> <line x1="12" y1="21" x2="12" y2="23"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line> <line x1="1" y1="12" x2="3" y2="12"></line> <line x1="21" y1="12" x2="23" y2="12"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line> </svg> </symbol> <symbol id="svg-moon" viewBox="0 0 24 24"> <title>Dark mode</title> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon"> <path stroke="none" d="M0 0h24v24H0z" fill="none" /> <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /> </svg> </symbol> </svg> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a id="theme-toggle" class="site-button"><svg width='18px' height='18px'><use href="#svg-sun"></use></svg></a> </li> <li class="aux-nav-list-item"> <a href="https://csforeach.ucsd.edu/" class="site-button" target="_blank" rel="noopener noreferrer"> CS Foreach </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/Example">An Example</a></li> <li class="breadcrumb-nav-list-item"><span>Creating the Backend</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="creating-our-backend"> <a href="#creating-our-backend" class="anchor-heading" aria-labelledby="creating-our-backend"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating our Backend </h1> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#photogallery-backend" id="markdown-toc-photogallery-backend"><strong>Photogallery Backend</strong></a></li> <li><a href="#understanding-the-code" id="markdown-toc-understanding-the-code"><strong>Understanding The Code</strong></a> <ol> <li><a href="#importing-tools-we-need" id="markdown-toc-importing-tools-we-need"><strong>Importing Tools We Need</strong></a></li> <li><a href="#organization-of-files" id="markdown-toc-organization-of-files"><strong>Organization of Files</strong></a></li> <li><a href="#creating-a-data-model" id="markdown-toc-creating-a-data-model"><strong>Creating a Data Model</strong></a></li> <li><a href="#restful-routes" id="markdown-toc-restful-routes"><strong>RESTful Routes</strong></a></li> </ol> </li> </ol><hr /> <h3 class="no_toc" id="-fastapi"> <a href="#-fastapi" class="anchor-heading" aria-labelledby="-fastapi"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <img src="../source/assets/images/fastapi-1.svg" alt="FastAPI Logo" width="15" height="15" /> FastAPI </h3> <p>For our Web Development Starter Kit, we’ll be utilizing FastAPI, an essential toolkit for those creating websites and web applications. Consider FastAPI as a collection of foundational tools that developers employ to build and manage the unseen components of websites or apps. These components are crucial for functions like securely transmitting your data during sign-ups or log-ins.</p> <p>While there are other frameworks like Flask, Django, and Tornado, each serving distinct purposes, FastAPI stands out for its ease of use and robust built-in features. This means you can achieve more with less coding effort, making it an excellent choice for both quick website deployment and for those new to web development, thanks to its gentle learning curve.</p> <p class="caution">Complete <a href="Getting Started">Getting Started</a> before doing this.</p> <h3 id="photogallery-backend"> <a href="#photogallery-backend" class="anchor-heading" aria-labelledby="photogallery-backend"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Photogallery Backend</strong> </h3> <p>Create an app.py file at the root level of your project folder. Inside of it, copy these lines of code.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">Request</span><span class="p">,</span> <span class="n">HTTPException</span>
<span class="kn">from</span> <span class="n">fastapi.responses</span> <span class="kn">import</span> <span class="n">HTMLResponse</span><span class="p">,</span> <span class="n">JSONResponse</span>
<span class="kn">from</span> <span class="n">fastapi.staticfiles</span> <span class="kn">import</span> <span class="n">StaticFiles</span>
<span class="kn">from</span> <span class="n">fastapi.templating</span> <span class="kn">import</span> <span class="n">Jinja2Templates</span>
<span class="kn">from</span> <span class="n">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">import</span> <span class="n">uvicorn</span>

<span class="n">app</span> <span class="o">=</span> <span class="nc">FastAPI</span><span class="p">()</span>

<span class="n">static_files</span> <span class="o">=</span> <span class="nc">StaticFiles</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="sh">'</span><span class="s">public</span><span class="sh">'</span><span class="p">)</span>
<span class="n">views</span> <span class="o">=</span> <span class="nc">Jinja2Templates</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="sh">"</span><span class="s">public/views</span><span class="sh">"</span><span class="p">)</span>

<span class="n">app</span><span class="p">.</span><span class="nf">mount</span><span class="p">(</span><span class="sh">'</span><span class="s">/public</span><span class="sh">'</span><span class="p">,</span> <span class="n">static_files</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">public</span><span class="sh">'</span><span class="p">)</span>
<span class="n">app</span><span class="p">.</span><span class="nf">mount</span><span class="p">(</span><span class="sh">"</span><span class="s">/css</span><span class="sh">"</span><span class="p">,</span> <span class="nc">StaticFiles</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="sh">"</span><span class="s">public/css</span><span class="sh">"</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">css</span><span class="sh">"</span><span class="p">)</span>
<span class="n">app</span><span class="p">.</span><span class="nf">mount</span><span class="p">(</span><span class="sh">"</span><span class="s">/js</span><span class="sh">"</span><span class="p">,</span> <span class="nc">StaticFiles</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="sh">"</span><span class="s">public/js</span><span class="sh">"</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">js</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> 
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> 
    <span class="n">src</span><span class="p">:</span> <span class="nb">str</span> 

<span class="n">images</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nd">@app.get</span><span class="p">(</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HTMLResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_home</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">views</span><span class="p">.</span><span class="nc">TemplateResponse</span><span class="p">(</span><span class="sh">"</span><span class="s">main.html</span><span class="sh">"</span><span class="p">,</span> <span class="p">{</span><span class="sh">"</span><span class="s">request</span><span class="sh">"</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span> <span class="sh">"</span><span class="s">images</span><span class="sh">"</span><span class="p">:</span> <span class="n">images</span><span class="p">})</span>
    

<span class="nd">@app.post</span><span class="p">(</span><span class="sh">"</span><span class="s">/images</span><span class="sh">"</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">JSONResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">post_image</span><span class="p">(</span><span class="n">img_data</span><span class="p">:</span> <span class="n">Image</span><span class="p">):</span>
    <span class="c1"># add data
</span>    <span class="n">img_id</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">images</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span><span class="n">img_id</span><span class="p">:</span> <span class="n">img_data</span><span class="p">})</span>
    <span class="k">return</span> <span class="p">{</span><span class="sh">"</span><span class="s">img_id</span><span class="sh">"</span><span class="p">:</span> <span class="n">img_id</span><span class="p">,</span> <span class="o">**</span><span class="n">img_data</span><span class="p">.</span><span class="nf">dict</span><span class="p">()}</span>

<span class="nd">@app.put</span><span class="p">(</span><span class="sh">"</span><span class="s">/images/{img_id}</span><span class="sh">"</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">JSONResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">modify_image</span><span class="p">(</span><span class="n">img_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">img_data</span><span class="p">:</span> <span class="n">Image</span><span class="p">):</span>
    <span class="c1">#modify data
</span>    <span class="k">if</span> <span class="n">img_id</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
        <span class="n">images</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span><span class="n">img_id</span><span class="p">:</span> <span class="n">img_data</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">images</span><span class="p">[</span><span class="n">img_id</span><span class="p">]</span>
    <span class="k">raise</span> <span class="nc">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sh">"</span><span class="s">Image not found</span><span class="sh">"</span><span class="p">)</span>

<span class="nd">@app.delete</span><span class="p">(</span><span class="sh">'</span><span class="s">/images/{img_id}</span><span class="sh">'</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">JSONResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">delete_img</span><span class="p">(</span><span class="n">img_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">img_id</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">images</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="n">img_id</span><span class="p">)</span>
    <span class="k">raise</span> <span class="nc">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sh">"</span><span class="s">Image not found</span><span class="sh">"</span><span class="p">)</span>
    
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">"</span><span class="s">__main__</span><span class="sh">"</span><span class="p">:</span>
    <span class="n">uvicorn</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="sh">"</span><span class="s">app:app</span><span class="sh">"</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="sh">"</span><span class="s">127.0.0.1</span><span class="sh">"</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8007</span><span class="p">,</span> <span class="nb">reload</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

</code></pre></div></div> <h3 id="understanding-the-code"> <a href="#understanding-the-code" class="anchor-heading" aria-labelledby="understanding-the-code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Understanding The Code</strong> </h3> <h4 id="importing-tools-we-need"> <a href="#importing-tools-we-need" class="anchor-heading" aria-labelledby="importing-tools-we-need"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Importing Tools We Need</strong> </h4> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">Request</span><span class="p">,</span> <span class="n">HTTPException</span>
<span class="kn">from</span> <span class="n">fastapi.responses</span> <span class="kn">import</span> <span class="n">HTMLResponse</span><span class="p">,</span> <span class="n">JSONResponse</span>
<span class="kn">from</span> <span class="n">fastapi.staticfiles</span> <span class="kn">import</span> <span class="n">StaticFiles</span>
<span class="kn">from</span> <span class="n">fastapi.templating</span> <span class="kn">import</span> <span class="n">Jinja2Templates</span>
<span class="kn">import</span> <span class="n">uvicorn</span>
</code></pre></div></div> <ul> <li><strong>FastAPI</strong>: This is the main tool for building our web server.</li> <li><strong>Request</strong>: This allows us to see what the user is asking for. For example, if someone wants to view a specific photo, ‘Request’ helps us figure out which photo they want.</li> <li><strong>HTTPException</strong>: Sometimes things go wrong (like if someone asks for a photo that doesn’t exist). This lets us handle such errors by responding with an appropriate error message.</li> <li><strong>HTMLResponse</strong>: When we want to send back a whole webpage.</li> <li><strong>JSONResponse</strong>: When we want to send back just some information, not a full page, in a structured format. JSON is a way of organizing data that’s easy for both humans and - computers to read.</li> <li><strong>StaticFiles</strong>: This is used to manage files that don’t change often, like pictures, stylesheets (CSS files), or JavaScript files.</li> <li><strong>Jinja2Templates</strong>: Helps us dynamically create HTML pages. For example, if you want to show a photo with a title and description, Jinja2 can generate a webpage on the fly using a template.</li> <li><strong>uvicorn</strong>: This is the program that runs our FastAPI app. It’s like the engine that powers our assistant.</li> </ul> <h4 id="organization-of-files"> <a href="#organization-of-files" class="anchor-heading" aria-labelledby="organization-of-files"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Organization of Files</strong> </h4> <p class="caution">You have to create these folders at the root of project, which is the folder you opened when creating the project. You can see what your root is by looking at what folder you’re in.</p> <p>In this image, we’re in the Photogallery root.</p> <p><img src="../source/assets/images/root.png" alt="Root" /></p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span> <span class="o">=</span> <span class="nc">FastAPI</span><span class="p">()</span>

<span class="n">static_files</span> <span class="o">=</span> <span class="nc">StaticFiles</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="sh">'</span><span class="s">public</span><span class="sh">'</span><span class="p">)</span>
<span class="n">views</span> <span class="o">=</span> <span class="nc">Jinja2Templates</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="sh">"</span><span class="s">public/views</span><span class="sh">"</span><span class="p">)</span>

<span class="n">app</span><span class="p">.</span><span class="nf">mount</span><span class="p">(</span><span class="sh">'</span><span class="s">/public</span><span class="sh">'</span><span class="p">,</span> <span class="n">static_files</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">public</span><span class="sh">'</span><span class="p">)</span>
<span class="n">app</span><span class="p">.</span><span class="nf">mount</span><span class="p">(</span><span class="sh">"</span><span class="s">/css</span><span class="sh">"</span><span class="p">,</span> <span class="nc">StaticFiles</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="sh">"</span><span class="s">public/css</span><span class="sh">"</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">css</span><span class="sh">"</span><span class="p">)</span>
<span class="n">app</span><span class="p">.</span><span class="nf">mount</span><span class="p">(</span><span class="sh">"</span><span class="s">/js</span><span class="sh">"</span><span class="p">,</span> <span class="nc">StaticFiles</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="sh">"</span><span class="s">public/js</span><span class="sh">"</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">js</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <ul> <li><strong>app = FastAPI()</strong>: Starts our web server.</li> <li><strong>StaticFiles</strong>: Tells our server where to find static files. We organize files into directories, much like folders on a computer.</li> <li><strong>Jinja2Templates</strong>: Sets up where to find HTML templates for generating web pages.</li> <li><strong>app.mount(…)</strong>: This makes these directories available to our server so it can access them when needed.</li> </ul> <h4 id="creating-a-data-model"> <a href="#creating-a-data-model" class="anchor-heading" aria-labelledby="creating-a-data-model"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Creating a Data Model</strong> </h4> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> 
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> 
    <span class="n">src</span><span class="p">:</span> <span class="nb">str</span> 

<span class="n">images</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></div> <ul> <li><strong>Image</strong>: This acts like a form that defines what information a photo needs before it can be added to our album: a title, a description, and a source (src, where the photo is stored).</li> </ul> <p>We’re going to keep the information contained within <code class="language-plaintext highlighter-rouge">Image</code> in a dictionary as defined by <code class="language-plaintext highlighter-rouge">images = {}</code></p> <h4 id="restful-routes"> <a href="#restful-routes" class="anchor-heading" aria-labelledby="restful-routes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>RESTful Routes</strong> </h4> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@app.get</span><span class="p">(</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HTMLResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_home</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTMLResponse</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">views</span><span class="p">.</span><span class="nc">TemplateResponse</span><span class="p">(</span><span class="sh">"</span><span class="s">main.html</span><span class="sh">"</span><span class="p">,</span> <span class="p">{</span><span class="sh">"</span><span class="s">request</span><span class="sh">"</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span> <span class="sh">"</span><span class="s">images</span><span class="sh">"</span><span class="p">:</span> <span class="n">images</span><span class="p">})</span>
    
<span class="nd">@app.post</span><span class="p">(</span><span class="sh">"</span><span class="s">/images</span><span class="sh">"</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">JSONResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">post_image</span><span class="p">(</span><span class="n">img_data</span><span class="p">:</span> <span class="n">Image</span><span class="p">):</span>
    <span class="c1"># add data
</span>    <span class="n">img_id</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">images</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span><span class="n">img_id</span><span class="p">:</span> <span class="n">img_data</span><span class="p">})</span>
    <span class="k">return</span> <span class="p">{</span><span class="sh">"</span><span class="s">img_id</span><span class="sh">"</span><span class="p">:</span> <span class="n">img_id</span><span class="p">,</span> <span class="o">**</span><span class="n">img_data</span><span class="p">.</span><span class="nf">dict</span><span class="p">()}</span>

<span class="nd">@app.put</span><span class="p">(</span><span class="sh">"</span><span class="s">/images/{img_id}</span><span class="sh">"</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">JSONResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">modify_image</span><span class="p">(</span><span class="n">img_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">img_data</span><span class="p">:</span> <span class="n">Image</span><span class="p">):</span>
    <span class="c1">#modify data
</span>    <span class="k">if</span> <span class="n">img_id</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
        <span class="n">images</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span><span class="n">img_id</span><span class="p">:</span> <span class="n">img_data</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">images</span><span class="p">[</span><span class="n">img_id</span><span class="p">]</span>
    <span class="k">raise</span> <span class="nc">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sh">"</span><span class="s">Image not found</span><span class="sh">"</span><span class="p">)</span>

<span class="nd">@app.delete</span><span class="p">(</span><span class="sh">'</span><span class="s">/images/{img_id}</span><span class="sh">'</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">JSONResponse</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">delete_img</span><span class="p">(</span><span class="n">img_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">img_id</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">images</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="n">img_id</span><span class="p">)</span>
    <span class="k">raise</span> <span class="nc">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sh">"</span><span class="s">Image not found</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <ul> <li><strong>@app.get(‘/’)</strong>: This tells our web server to listen for requests to the home page (like when someone visits the main URL of our digital album).</li> <li><strong>response_class=HTMLResponse</strong>: We’re saying that our response will be an HTML page.</li> <li> <p><strong>get_home</strong>: This is the function that runs when someone visits the home page. It uses a template to create a webpage that shows all the photos.</p> </li> <li><strong>@app.post(“/images”)</strong>: This sets up a way for users to add new photos. ‘Post’ is used when the user is sending us new data (like uploading a photo).</li> <li> <p><strong>response_class=JSONResponse</strong>: Indicates the server will respond with data in JSON format, confirming the photo was added.</p> </li> <li><strong>@app.put and @app.delete</strong>: These are for updating and deleting photos, respectively. ‘Put’ is used for changes, while ‘Delete’ is for removing photos.</li> <li><strong>{img_id}</strong>: This is a placeholder in the URL for the specific photo’s ID. It tells the server which photo to update or delete.</li> </ul> <p><a href="Frontend" class="float-left v-align-text-top">Previous: Frontend</a> <a href="/team" class="float-right v-align-text-top">Next: The Team</a></p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
